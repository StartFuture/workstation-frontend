<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WorkStation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/cadastro.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/confirmacao-reserva-box.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='images/png/icon-branco.png') }}">
</head>

<body onload="loadPage()">
    {% with profile=profile %}
    {% include 'generic/section_header.html'%}
    {% endwith %}
    
    <div class="container-img-reduzida-e-textos">
        <img class="container-img-reduzida" src=" {{ url_for('static', filename='images/png/carrosel-box/1.jpg') }} ">
        
        <div class="container-textos-inf-box">
            <div class="container-textos-principais-inf">
                <div class="container-h1-inf">
                    <h1 class="h1-inf"> {{ box_name }} </h1>
                    <p class="p-endereco-inf"> {{ box_complete_adress }} </p>
                </div>
                <div class="container-h1-inf">
                    {% if qtd_hours > 1 %}
                        <h1 class="h1-horas" style> {{ qtd_hours }} horas</h1>
                    {% else %}
                        <h1 class="h1-horas" style> {{ qtd_hours }} horas</h1>
                    {% endif %}
                        <p class="p-hora-inf">{{ times_show_screen }}</p>
                        <p class="p-hora-inf">{{ date_schedule }}</p>
                </div>
                </p>
            </div>
        </div>
    </div>
    <div class="container-forma-de-pagamento">
        <div class="container-h2-forma-pagamento">
            <h2 class="h2-forma-pagamento">Forma de pagamento</h2>
        </div>
        <div class="container-inf-cartao">
            <div class="container-h2-forma-pagamento">
                <p>Cartão de crédito</p>
            </div>
            <div id="coontainer-pagamento-confirmar-reserva" class="container-h2-forma-pagamento">
                <p>*** **** **** 4567</p>
            </div>
            <div class="container-h2-forma-pagamento">
                <input class="editar" id="my-btn-alterar-cartao-confirmacao" type="submit" value="Editar">
            </div>
        </div>
    </div>
    <div class="container-ultimas-infs">
        <div class="container-1-linha">
            <div class="container-p-box">
                <p class="p-box">Box</p>
            </div>
            <div class="container-p-box">
                <p class="p-preco">R$ {{ price_hour_box }} /h</p>
            </div>

        </div>
        <div class="container-1-linha segunda-linha">
            <div class="container-p-box">
                <p class="p-box">Horas reservadas</p>
            </div>
            <div class="container-p-box">
                {% if qtd_hours > 1 %}
                    <p class="p-preco">{{qtd_hours}} horas</p>
                {% else %}
                    <p class="p-preco">{{qtd_hours}} hora</p>
                {% endif %}
            </div>
        </div>
    </div>
    <hr>
    <div class="container-ultimas-infs">
        <div class="container-1-linha">
            <div class="container-p-box">
                <p class="p-box" style="font-weight: bold;">Total a pagar</p>
            </div>
            <div class="container-p-box">
                <p class="p-preco" style="color: #FF0A54; font-weight: bold;">R$ {{ total_price }} reais</p>
            </div>
        </div>
        <div class="button-conhecer-container button-ler-artigo-container ">
            
            <form method="post">
                <input type="text" name="id_box" value=" {{ id_box }}" hidden>
                <input type="text" name="data" value=" {{ date_schedule }} " hidden>
                {% for schedule in list_scheduled_times %}
                    <input type="text" name="time_{{schedule}}" value="{{schedule}}" hidden>
                {% endfor %}
                <div class="button-conhecer-container button-ler-artigo-container ">
                    <a class="close cancelar" id="close-alterar-cartao-confirmacao-2" href="box-faria-lima.html">Cancelar</a>
                    <button class="button-conhecer button-ler-artigo btn-salvar" type="submit">Confirmar</button>
                </div>
            </form>
        </div>
        <!--MODAL-->
        <div id="my-modal-alterar-cartao-confirmacao" class="modal ">
            <div class="modal-content modal-content-cartao">
                <p id="title-modal-confirmar-reserva-cartao" class="p-sucesso">Adicionar novo cartão de crédito</p>
                    <div class="container-input">

                        <label class="campo-requerido">Nome do titular</label>
                        <input class="inputs-login inputs-padding" type="text" placeholder="Digite o nome do titular">
                        <label class="campo-requerido">Número do cartão</label>
                        <input class="inputs-login inputs-padding" type="text" placeholder="Número do cartão">
                        <label class="campo-requerido">Validade</label>
                        <input class="inputs-login inputs-padding" type="text" placeholder="MM/AA">
                        <label class="campo-requerido">CVV</label>
                        <input class="inputs-login inputs-padding" type="text" placeholder="Cód. de segurança">
                    </div>
                    <div class="button-conhecer-container button-ler-artigo-container ">
                        <a class="close cancelar" id="close-alterar-cartao-confirmacao">Cancelar</a>
                        <button class="button-conhecer button-ler-artigo btn-salvar" type="submit">Salvar</button>
                    </div>
            </div>
        </div>
        <div id="modalSucesso" class="modal">
            <div class="modal-content">

                <div class="container-sucess">
                    <img class="sucess-img" src=" {{ url_for('static', filename='images/svg/login-page/sucess.svg') }} ">
                </div>
                <p class="p-sucesso">Box agendada com sucesso</p>
                <div class="container-btn-continue">
                    <a class="btn-continue-cadastro" style="text-align: center" href="{{ url_for('user.profile') }}">Continuar</a>
                </div>
            </div>
        </div>
        <div id="modalFalha" class="modal">
            <div class="modal-content">

                <div class="container-sucess">
                    <img class="sucess-img" src=" {{ url_for('static', filename='images/svg/login-page/error.svg') }} ">
                </div>
                <p class="p-sucesso">{{msg_error}}{{error_dates}}</p>
                <div class="container-btn-continue">
                    <a class="btn-continue-cadastro" style="text-align: center" href="/box/details/{{ id_box }}">Continuar</a>
                </div>
            </div>
        </div>
</body>
<script src=" {{ url_for('static', filename='js/navbar.js') }} "></script>
<script src=" {{ url_for('static', filename='js/modal-alterar-cartao-confirmacao.js') }} "></script>
<script>
    var modalSucesso = document.getElementById("modalSucesso");
    var modalFalha = document.getElementById("modalFalha");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal

    // When the user clicks on <span> (x), close the modal
    span.onclick = function(event) {
        if (event.target == modalSucesso) {
            modalSucesso.style.display = "none";
            window.location.replace("{{url_for('user.profile')}}");
        }
        else if (event.target == modalFalha) {
            modalFalha.style.display = "none";
            window.location.replace("{{url_for('box.index_box')}}" + "/details/{{ id_box }}");
        }
        
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modalSucesso) {
            modalSucesso.style.display = "none";
            window.location.replace("{{url_for('user.profile')}}");
        }
        else if (event.target == modalFalha) {
            modalFalha.style.display = "none";
            window.location.replace("{{url_for('box.index_box')}}" + "/details/{{ id_box }}");
        }
    }

    var closeBtn = document.getElementsByClassName("btn-continue-cadastro")[0];

    closeBtn.onclick = function() {
        modal.style.display = "none";
    }

    function loadPage() {

        if ('{{status}}' == 'start') {
            console.log('start')
        }

        else if ('{{status}}' == 'success') {
            modalSucesso.style.display = "block";
        }

        else if ('{{status}}' == 'error') {
            modalFalha.style.display = "block";
        }
        
    }
</script>

</html>